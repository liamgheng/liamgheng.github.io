---
layout: post
title: "软件架构笔记 01"
---

软件架构笔记第一篇，更多是一些偏向心法的内容。

## 为何需要架构师

软件工程本身是复杂的：
- 软件开发中可以被研发自由发挥的地方很多
- 不同研发水平参差不起
- 软件开发完成之后，需要不断迭代

依赖人去保证工程质量很难，因为人是有惰性的，所以需要架构师（团队）掌控整个工程全局，规划和指引系统演变过程。

大部分人对对架构师理解仅仅是产出系统架构图并且给研发讲清楚，实际上架构师需要对软件工程结果负责，包括：
- 按时发布
- 敏捷响应需求
- 降低质量风险
- 降低维护成本

因为只要做到这些才能证明架构师产出的架构是合理的并且可以落地的，而非仅仅停留在空中。

> 不能要漂亮的架构，而是做务实且可以落地的架构。

## 架构师心性修炼

- 认同他人的能力，不要在没有全面理解他人思想的情况下调整即有架构。
- 学会自我批判，经常思考自己做的架构中的缺点，并且思考如何改进。
- 架构能力依赖平常一点一滴积累反思和打磨得来，并非看了什么书之后就突飞猛进。

## 如何判断架构优劣

- KISS。自然且符合直觉，好维护。
- 模块正交分解。
    - 可测试
    - 模块接口符合业务含义
- 可观测性
    - 及时发现问题
    - 快速定位问题根因
- 运营成本低（To b 场景）
    - 对客户来说是易用的
    - 出现问题能够指引客户自助解决

## 架构设计工具

### 业务分解

把系统划分为核心系统，加上多个正交分解周边系统。

坚持核心系统最小化，不往核心系统增加新功能。

### 接口设计原则

- 自然且体现业务需求
- 参数泛华和抽象，从而可以支撑更广泛场景，比如 go 中 io.Reader io.Writer 相对 File 来说就是更通用的。
    - 泛华会带来复杂度和理解成本，要注意泛化的度。

### 插件机制应对变化

## 架构老化和重构

### 老化原因

- 之前架构前瞻性不足或者需求理解不深刻，导致后续变动频繁
- 架构没有传承，新人不理解服务边界划分及其原因
- 研发水平不足
- 缺少评审环节，或者质量不高

### 重构挑战

- 架构设计：重构是要保证架构比现在更优的。
- 资源规划与调度：和新功能开发优先级怎么安排。
- 阶段规划：大任务变小，降低内部抵触情绪和风险。
- 持久战的韧性。

## 材料

- [许式伟的架构课](https://time.geekbang.org/column/article/89668)